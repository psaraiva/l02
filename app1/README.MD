# Weather by CEP com observabilidade

<a href="https://www.weatherapi.com/" title="Free Weather API"><img src='//cdn.weatherapi.com/v4/images/weatherapi_logo.png' alt="Weather data by WeatherAPI.com" border="0"></a>

---

Um servi√ßo em Go que fornece a temperatura atual para um determinado CEP (C√≥digo de Endere√ßamento Postal) brasileiro. A aplica√ß√£o orquestra chamadas a duas APIs externas:

1.  **ViaCEP**: Para encontrar a cidade correspondente ao CEP fornecido.
2.  **WeatherAPI**: Para obter os dados de clima da cidade encontrada.

## ‚ú® Features

- Valida√ß√£o do formato do CEP (`XXXXX-XXX`).
- Integra√ß√£o com as APIs ViaCEP e WeatherAPI.
- Resposta em JSON com as temperaturas em Celsius, Fahrenheit e Kelvin.
- Pronta para deploy com Docker e otimizada para ambientes como o Google Cloud Run.

## ‚öôÔ∏è Pr√©-requisitos

- **Go 1.24** ou superior.
- **Docker** (para execu√ß√£o em cont√™iner).
- **API Key** do WeatherAPI.com.

## üöÄ Execu√ß√£o Local

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone <URL_DO_SEU_REPOSITORIO>
    cd <NOME_DA_PASTA>
    ```

2.  **Instale as depend√™ncias:**
    ```bash
    go mod tidy
    ```

3.  **Configure a API Key:**
    Crie um arquivo chamado `.env` na raiz do projeto e adicione sua chave da WeatherAPI:
    ```
    WEATHER_API_KEY="sua_chave_api_aqui"
    ```

4.  **Execute a aplica√ß√£o:**
    ```bash
    go run .
    ```
    O servidor iniciar√° na porta `8080`.

## üê≥ Execu√ß√£o com Docker

1.  **Construa a imagem Docker:**
    ```bash
    docker build -t weather-by-cep .
    ```

2.  **Execute o cont√™iner:**
    Substitua `sua_chave_api_aqui` pela sua chave real da WeatherAPI.
    ```bash
    docker run -p 8080:8080 -e WEATHER_API_KEY="sua_chave_api_aqui" weather-by-cep
    ```

## üì° Uso da API

### Endpoint

`GET /?cep={cep}`

### Par√¢metros

- `cep` (string, obrigat√≥rio): O CEP no formato `XXXXX-XXX`.

### Exemplo de Requisi√ß√£o

```bash
curl "http://localhost:8080/?cep=01001-000"
```

### Exemplo de Resposta de Sucesso (200 OK)

```json
{
    "city": "S√£o Paulo",
    "temp_C": 21.0,
    "temp_F": 69.8,
    "temp_K": 294.15
}
```

### Respostas de Erro

**`400 Bad Request`**: Se o par√¢metro CEP n√£o for fornecido.
```
par√¢metro 'cep' √© obrigat√≥rio
```
**`422 Unprocessable Entity`**: Se o formato do CEP for inv√°lido.
```
CEP inv√°lido
```
**`404 Not Found`**: Se o CEP for v√°lido, mas n√£o for encontrado na API ViaCEP.
```
CEP n√£o encontrado
```
**`500 Internal Server Error`**: Se ocorrer um erro interno no servidor (por exemplo, uma falha ao contatar as APIs externas).
```
ocorreu um erro ao processar sua requisi√ß√£o
```
